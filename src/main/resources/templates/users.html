<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      sec:authorize="hasRole('SUPER_ADMIN')">
<head>
    <meta charset="UTF-8">
    <title>Управление пользователями</title>
    <link rel="stylesheet" th:href="@{/style.css}" />
</head>
<body>
<div class="container" style="margin-top: 60px;">
    <a href="/festivals" class="btn btn-secondary" style="margin-bottom: 24px; display: inline-block;">← Назад к фестивалям</a>
    <div class="admin-container" style="max-width: 900px; width: 100%;">
        <h1 style="margin-bottom: 24px;">Управление пользователями</h1>
        <div th:if="${message}" class="alert alert-success" th:text="${message}">Сообщение</div>
        <table class="admin-table">
            <thead>
            <tr>
                <th>ID</th>
                <th>Email</th>
                <th>Роль</th>
                <th>Действия</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="u : ${users}">
                <td th:text="${u.id}">1</td>
                <td th:text="${u.email}">user@example.com</td>
                <td><span th:text="${u.role}">USER</span></td>
                <td>
                    <form th:action="@{/users/update}" method="post" style="display:flex; align-items:center; gap:12px; justify-content:flex-end;">
                        <input type="hidden" name="userId" th:value="${u.id}" />
                        <select name="role" class="role-select">
                            <option value="USER" th:selected="${u.role == 'USER'}">USER</option>
                            <option value="ADMIN" th:selected="${u.role == 'ADMIN'}">ADMIN</option>
                            <option value="ORGANIZER"   th:selected="${u.role == 'ORGANIZER'}">ORGANIZER</option>
                            <option value="SUPER_ADMIN" th:selected="${u.role == 'SUPER_ADMIN'}">SUPER_ADMIN</option>
                        </select>
                        <button type="submit" class="btn btn-primary role-save-btn">Сохранить</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>